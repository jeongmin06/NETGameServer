# AGENTS.md — Codex 작업 가이드

이 문서는 Codex가 이 저장소에서 작업할 때 따라야 할 규칙을 정의한다.  
코드 스타일을 기존 프로젝트와 동일하게 유지하면서, 사람이 읽고 이해하기 쉬운 코드를 생성하는 것을 최우선 목표로 한다.

---

## 1. 프로젝트 개요

- 프로젝트명: NETGameServer
- 주요 언어: C# (.NET)
- 성격: 게임 서버 / 서버 프레임워크
- 주요 기술 스택
  - .NET
  - gRPC
  - MongoDB / Redis
  - Entity Framework

### 주요 디렉토리 구조
- `/src` : 실제 서버 및 라이브러리 코드
- `/tests` : 단위 테스트 / 통합 테스트
- `/docs` : 아키텍처 문서 및 사람이 읽는 문서
- `/scripts` : 개발 및 운영 스크립트

---

## 2. 빌드 및 테스트 방법

Codex는 아래 명령을 기준으로 빌드와 테스트를 수행한다.

### 의존성 복원
- `dotnet restore`

### 빌드
- `dotnet build --no-restore`

### 테스트
- `dotnet test`

특정 테스트 프로젝트만 실행해야 할 경우:
- `dotnet test ./tests/<테스트프로젝트명>`

---

## 3. 코드 스타일 및 작성 원칙

### 가장 중요한 원칙
- 기존 코드 스타일을 절대 변경하지 않는다
- 새로 작성하는 코드는 반드시 기존 파일의 스타일을 따른다
- 코드 품질의 기준은 “사람이 읽기 쉬운가”이다

### 코드 스타일 기본 규칙
- 네이밍, 들여쓰기, 중괄호 위치는 기존 코드와 동일하게 유지한다
- 타입과 메서드는 `PascalCase`를 사용한다
- 지역 변수는 기존 코드 기준에 맞게 `camelCase`를 사용한다
- `var`는 타입이 명확할 때만 사용한다
- 한 줄이 너무 길어지지 않도록 가독성을 유지한다

### 가독성(사람 친화) 우선 규칙
Codex는 다음을 반드시 지킨다.
- 의미 있는 변수명을 사용한다 (`handler`, `sessionManager` 등)
- 이해가 필요한 로직에는 주석을 추가한다
- 과도하게 압축된 한 줄 코드 작성을 금지한다
- 중첩이 깊어질 경우 로직을 분리한다

피해야 할 예
- 의미 없는 축약 변수명 (`a`, `b`, `tmp`)
- 주석 없는 복잡한 조건문
- 한 메서드에 너무 많은 책임을 몰아넣는 구조

---

## 4. 변경 단위 및 작업 방식

- 하루 작업은 작은 변경 단위로 나눈다
- 한 커밋에는 하나의 목적만 담는다
- 리팩토링과 기능 추가는 분리한다
- 공용 API 변경 시 문서 또는 주석을 함께 수정한다

---

## 5. 커밋 메시지 규칙

아래 형식을 따른다.

- `feat: 기능 추가 요약`
- `fix: 버그 수정 요약`
- `refactor: 내부 구조 개선`
- `docs: 문서 수정`
- `test: 테스트 추가 또는 수정`

예시
- `feat: 세션 타임아웃 갱신 로직 추가`
- `fix: 인벤토리 동시성 처리 오류 수정`

---

## 6. PR 작성 규칙 (Codex가 PR을 생성할 경우)

PR에는 반드시 아래 내용을 포함한다.

### PR 제목
- 변경 내용을 한 줄로 명확히 표현한다

### PR 본문 템플릿
- 변경 내용: 무엇을 변경했는지
- 변경 이유: 왜 필요한 변경인지
- 테스트: 실행한 테스트 명령 (예: `dotnet test`)
- 영향도: 기존 코드/동작에 미치는 영향

---

## 7. Codex 작업 가드레일

Codex는 반드시 지켜야 한다.
- 기존 코드 스타일을 유지한다
- 불확실한 경우 질문 후 진행한다
- 복잡한 로직에는 주석을 추가한다
- 신규 기능에는 테스트 코드를 작성한다

Codex가 해서는 안 되는 것
- 비밀 키 / 인증 정보 수정
- CI/CD 설정 변경 (요청 없는 경우)
- 대규모 의존성 추가
- 프로젝트 전반 구조 변경

---

## 8. 데일리 작업 요약 포맷 (Notion 연동용)

Codex에게 “오늘 작업 요약”을 요청할 경우, 아래 형식으로 정리한다.

- 데일리 개발 로그: `YYYY.MM.DD`
- 오늘 한 일: 작업 요약
- 변경 사항: 주요 변경 파일 및 내용
- 테스트: 실행한 테스트
- 다음 작업: 예정 작업
- 메모: 기억해야 할 점

---

## 9. 최종 원칙 요약

- 기계가 아닌 사람이 읽는 코드
- 기존 스타일 존중
- 작고 명확한 변경
- 기록이 남는 개발
